<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Git Commit 规范指南 - 莱恩哈特的记事本</title>
  <link rel="alternate" hreflang="zh-cn" href="https://mustang1988.github.io/" />

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="MustangGu" />
  <meta name="description" content="1. Commit message 有啥用 提供更多的历史信息，方便快速浏览 可以过滤某些commit(比如文档改动)，便于快速查找信息 可以直接从commit生成Change" />







<meta name="generator" content="Hugo 0.37.1" />


<link rel="canonical" href="https://mustang1988.github.io/post/git-commit-%E8%A7%84%E8%8C%83%E6%8C%87%E5%8D%97/" />

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" href="/favicon.ico" />
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">




<link href="/dist/jane.min.css?v=2.7.0" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">




<meta property="og:title" content="Git Commit 规范指南" />
<meta property="og:description" content="1. Commit message 有啥用 提供更多的历史信息，方便快速浏览 可以过滤某些commit(比如文档改动)，便于快速查找信息 可以直接从commit生成Change" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mustang1988.github.io/post/git-commit-%E8%A7%84%E8%8C%83%E6%8C%87%E5%8D%97/" />



<meta property="article:published_time" content="2018-03-28T00:00:00&#43;00:00"/>

<meta property="article:modified_time" content="2018-03-28T00:00:00&#43;00:00"/>











<meta itemprop="name" content="Git Commit 规范指南">
<meta itemprop="description" content="1. Commit message 有啥用 提供更多的历史信息，方便快速浏览 可以过滤某些commit(比如文档改动)，便于快速查找信息 可以直接从commit生成Change">


<meta itemprop="datePublished" content="2018-03-28T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2018-03-28T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="1581">



<meta itemprop="keywords" content="Git,规范," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Git Commit 规范指南"/>
<meta name="twitter:description" content="1. Commit message 有啥用 提供更多的历史信息，方便快速浏览 可以过滤某些commit(比如文档改动)，便于快速查找信息 可以直接从commit生成Change"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">莱恩哈特的记事本</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>
</nav>

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">莱恩哈特的记事本</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>
  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">Git Commit 规范指南</h1>

      <div class="post-meta">
        <span class="post-time"> 2018-03-28 </span>
        <div class="post-category">
            
              <a href="/categories/git/"> Git </a>
            
          </div>
        <span class="more-meta"> 约 1581 字 </span>
        <span class="more-meta"> 预计阅读 4 分钟 </span>
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#1-commit-message-有啥用">1. Commit message 有啥用</a></li>
<li><a href="#2-正确的-commit-message-的使用姿势">2. 正确的 Commit message 的使用姿势</a>
<ul>
<li><a href="#1-header">1. Header</a></li>
<li><a href="#2-body">2. Body</a></li>
<li><a href="#3-footer">3. Footer</a></li>
<li><a href="#4-示例">4.示例</a></li>
<li><a href="#5-生成changelog">5.生成changelog</a></li>
<li><a href="#6-sourcetree-配置默认commit-message-模板">6.SourceTree 配置默认commit message 模板</a></li>
</ul></li>
<li><a href="#3-参考文献">3.参考文献:</a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      

<h2 id="1-commit-message-有啥用">1. Commit message 有啥用</h2>

<ul>
<li><p>提供更多的历史信息，方便快速浏览</p>

<ul>
<li><p>可以过滤某些commit(比如文档改动)，便于快速查找信息</p></li>

<li><p>可以直接从commit生成Change log,Change Log 是发布新版本时，用来说明与上一个版本差异的文档.例如:</p></li>
</ul>

<p><img src="http://oojbdbtdp.bkt.clowuddn.com/6632199163166779416.png?imageView/2/w/350" alt="example" /></p>

<ul>
<li><p>其他优点:</p></li>

<li><p>可读性好，清晰，不必深入看代码即可了解当前commit的作用</p></li>

<li><p>为 Code Reviewing 做准备</p></li>

<li><p>方便跟踪工程历史</p></li>

<li><p>让其他的开发者在运行 git blame 的时候想跪谢</p></li>

<li><p>提高项目的整体质量，提高个人工程素质</p></li>
</ul></li>
</ul>

<h2 id="2-正确的-commit-message-的使用姿势">2. 正确的 Commit message 的使用姿势</h2>

<p>每次提交，Commit message 都包括三个部分：Header，Body 和 Footer.</p>

<pre><code>    &lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;
    &lt;空行&gt;
    &lt;body&gt;
    &lt;空行&gt;
    &lt;footer&gt;
</code></pre>

<h3 id="1-header">1. Header</h3>

<p>Header部分只有一行，包括三个字段：type(必需)、scope(可选)和subject(必需)</p>

<ul>
<li><p><strong>type</strong></p>

<p>用于说明 commit 的类别，只允许使用下面7个标识</p>

<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">标识</th>
<th>作用</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">1</td>
<td align="center">feat</td>
<td>新增功能(feature)</td>
</tr>

<tr>
<td align="center">2</td>
<td align="center">fix</td>
<td>修复bug</td>
</tr>

<tr>
<td align="center">3</td>
<td align="center">docs</td>
<td>文档更新</td>
</tr>

<tr>
<td align="center">4</td>
<td align="center">style</td>
<td>更新代码格式,不影响代码的原始逻辑和执行</td>
</tr>

<tr>
<td align="center">5</td>
<td align="center">refactor</td>
<td>重构(即不是新增功能，也不是修改bug的代码)</td>
</tr>

<tr>
<td align="center">6</td>
<td align="center">test</td>
<td>新增单元测试用例</td>
</tr>

<tr>
<td align="center">7</td>
<td align="center">chore</td>
<td>构建过程或辅助工具的变动</td>
</tr>

<tr>
<td align="center">8</td>
<td align="center">perf</td>
<td>提升优化性能</td>
</tr>

<tr>
<td align="center">9</td>
<td align="center">deps</td>
<td>升级依赖</td>
</tr>
</tbody>
</table></li>

<li><p><strong>scope</strong></p>

<p>scope用于说明 commit 影响的范围，比如数据层、控制层、视图层等等，视项目不同而不同
如果你的修改影响了不止一个scope，你可以使用*代替</p></li>

<li><p><strong>subject</strong></p>

<p>subject是 commit 目的的简短描述需要注意以下事项:</p>

<table>
<thead>
<tr>
<th align="center"></th>
<th align="left">注意点</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">1</td>
<td align="left">不超过50个字符</td>
</tr>

<tr>
<td align="center">2</td>
<td align="left">以动词开头，使用第一人称现在时，比如change，而不是changed或changes</td>
</tr>

<tr>
<td align="center">3</td>
<td align="left">第一个字母小写</td>
</tr>

<tr>
<td align="center">4</td>
<td align="left">结尾不加句号（.）</td>
</tr>
</tbody>
</table></li>
</ul>

<h3 id="2-body">2. Body</h3>

<p>Body 部分是对本次 commit 的详细描述，可以分成多行,Body编写注意点:</p>

<table>
<thead>
<tr>
<th align="center"></th>
<th align="left">注意点</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">1</td>
<td align="left">每行不超过72个字符</td>
</tr>

<tr>
<td align="center">2</td>
<td align="left">段落之间用空行隔开</td>
</tr>

<tr>
<td align="center">3</td>
<td align="left">分段表述时,使用悬挂缩进</td>
</tr>

<tr>
<td align="center">4</td>
<td align="left">使用第一人称现在时，比如使用change而不是changed或changes</td>
</tr>

<tr>
<td align="center">5</td>
<td align="left">应该说明代码变动的动机，以及与以前行为的对比</td>
</tr>
</tbody>
</table>

<h3 id="3-footer">3. Footer</h3>

<p>通常情况下的commit是不需要编写Footer部分的说明的,仅在以下情况发生时编写</p>

<ul>
<li><strong>不兼容变动</strong></li>
</ul>

<p>如果当前代码与上一个版本不兼容，则 Footer 部分以BREAKING CHANGE开头，后面是对变动的描述、以及变动理由和迁移方法</p>

<ul>
<li><strong>关闭 Issue</strong></li>
</ul>

<p>如果当前 commit 针对某个issue，那么可以在 Footer 部分关闭这个 issue</p>

<ul>
<li><strong>Revert</strong></li>
</ul>

<p>如果当前 commit 用于撤销以前的 commit，则必须以revert:开头，后面跟着被撤销 Commit 的 Header.Body部分的格式是固定的，必须写成This reverts commit <hash>.，其中的hash是被撤销 commit 的 SHA 标识符.如果当前 commit 与被撤销的 commit，在同一个发布（release）里面，那么它们都不会出现在 Change log 里面如果两者在不同的发布，那么当前 commit，会出现在 Change log 的Reverts小标题下面</p>

<h3 id="4-示例">4.示例</h3>

<ul>
<li><p>初始化创建一个新的Git版本库</p></li>

<li><p>给初始化提交添加版本标签(0.0.1)</p></li>
</ul>

<p><img src="http://oojbdbtdp.bkt.clouddn.com/init.png" alt="init" /></p>

<ul>
<li><p>提交一个新功能</p>

<pre><code>git log 0.0.1 HEAD --grep feat
</code></pre>

<p><img src="http://oojbdbtdp.bkt.clouddn.com/feat.png" alt="feat" /></p></li>

<li><p>提交一个bug修正</p>

<pre><code>git log 0.0.1 HEAD --grep fix
</code></pre>

<p><img src="http://oojbdbtdp.bkt.clouddn.com/fix.png" alt="fix" /></p></li>

<li><p>提交一次文档更新</p>

<pre><code>git log 0.0.1 HEAD --grep docs
</code></pre>

<p><img src="http://oojbdbtdp.bkt.clouddn.com/docs.png" alt="docs" /></p></li>

<li><p>提交一次代码格式修改</p></li>
</ul>

<pre><code>  git log 0.0.1 HEAD --grep style
</code></pre>

<p><img src="http://oojbdbtdp.bkt.clouddn.com/style.png" alt="style" /></p>

<ul>
<li>提交一次代码优化重构</li>
</ul>

<pre><code>  git log 0.0.1 HEAD --grep refactor
</code></pre>

<p><img src="http://oojbdbtdp.bkt.clouddn.com/refactor.png" alt="refactor" /></p>

<ul>
<li>提交一个单元测试</li>
</ul>

<pre><code>  git log 0.0.1 HEAD --grep test
</code></pre>

<p><img src="http://oojbdbtdp.bkt.clouddn.com/test.png" alt="test" /></p>

<ul>
<li>查看所有git提交记录
<code>
git log 0.0.1 HEAD --pretty=format:%s
</code>
<br /></li>
</ul>

<p><img src="http://oojbdbtdp.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-19%2015.54.18.png" alt="log" /></p>

<p>使用<a href="https://github.com/jonas/tig">tig</a>查看到的提交记录:</p>

<p><img src="http://oojbdbtdp.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-19%2015.59.36.png" alt="tig" /></p>

<h3 id="5-生成changelog">5.生成changelog</h3>

<ul>
<li><p>安装工具</p>

<pre><code>npm install -g conventional-changelog-cli
</code></pre></li>

<li><p>配置conventional-changelog</p></li>
</ul>

<pre><code>  cd  项目目录
  npm init
</code></pre>

<p>修改 package.json,添加:</p>

<pre><code class="language-javascript">  &quot;scripts&quot;: {
      &quot;changelog&quot;: &quot;conventional-changelog -p angular -i CHANGELOG.md -s -r 0&quot;
  }
</code></pre>

<ul>
<li><p>执行命令</p>

<pre><code>npm run changelog
</code></pre></li>

<li><p>查看版本库目录下生成的CHANGELOG.md文件,如下图所示:</p></li>
</ul>

<p><img src="http://oojbdbtdp.bkt.clouddn.com/changelog.png?imageView/2/w/350" alt="changelog" /></p>

<ul>
<li>工具默认只会将feat和fix这两个type的commit信息抓取出来并生成到CHANGELOG.md文件中.</li>
</ul>

<h3 id="6-sourcetree-配置默认commit-message-模板">6.SourceTree 配置默认commit message 模板</h3>

<p>SourceTree提供了自定义的提交模板配置功能.</p>

<ul>
<li><p>在SourceTree中点击仓库菜单-&gt;仓库设置-&gt;提交模板
填入以下内容:</p>

<pre><code>type(scope): subject  

body  

bodydetail  

foot
</code></pre>

<p>保存设置,之后每次commit代码时,这个模板就会自动的填充到commit message中,然后我们只需要替换修改必要的部分就好了.</p></li>
</ul>

<h2 id="3-参考文献">3.参考文献:</h2>

<ul>
<li><p><a href="https://docs.google.com/document/d/1QrDFcIiPjSLDn3EL15IJygNPiHORgU1_OOAqWjiDU5Y/edit#heading=h.uyo6cb12dt6w">AngularJS Git Commit Message Conventions</a></p></li>

<li><p><a href="https://segmentfault.com/a/1190000009048911">git commit 规范指南</a></p></li>

<li><p><a href="http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html">Commit message 和 Change log 编写指南</a></p></li>

<li><p><a href="https://github.com/angular/angular.js/blob/master/CONTRIBUTING.md#toc10">Contributing to AngularJS</a></p></li>
</ul>

    </div>

    
    

    
    

    <footer class="post-footer">
      <div class="post-tags">
          
          <a href="/tags/git/">Git</a>
          
          <a href="/tags/%E8%A7%84%E8%8C%83/">规范</a>
          
        </div>

      
      <nav class="post-nav">
        
        
      </nav>
    </footer>
    

  

  

  <div id="comments-gitment"></div>
  <link rel="stylesheet" href="/lib/gitment/gitment-0.0.3.min.css">
    <script src="/lib/gitment/gitment-0.0.3.min.js"></script>
  <script type="text/javascript">
  const gitment = new Gitment({
    id: '2018-03-28 00:00:00 \x2b0000 UTC',
    title: 'Git Commit 规范指南',
    link: decodeURI(location.href),
    desc: '1. Commit message 有啥用 提供更多的历史信息，方便快速浏览 可以过滤某些commit(比如文档改动)，便于快速查找信息 可以直接从commit生成Change',
    owner: 'mustang1988',
    repo: 'blog_comments',
    oauth: {
      client_id: '715d102db9b27b46ae34',
      client_secret: '482b32f1d86988137b9be6f5d54901f2598d0ca6'
    }
  })
  gitment.render('comments-gitment')
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://github.com/imsun/gitment">comments powered by gitment.</a></noscript>
  </article>
        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://mustang1988.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy; 
    
      2017 - 
    2018
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">MustangGu</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>
<script type="text/javascript" src="/dist/jane.min.js?v=2.7.0"></script>





</body>
</html>
